{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Llama Vision API Response Schemas",
  "definitions": {
    "TokenUsage": {
      "type": "object",
      "description": "Token usage statistics",
      "properties": {
        "prompt_tokens": {
          "type": "integer",
          "description": "Number of tokens in the prompt"
        },
        "completion_tokens": {
          "type": "integer",
          "description": "Number of tokens in the completion"
        },
        "total_tokens": {
          "type": "integer",
          "description": "Total number of tokens used"
        }
      },
      "required": ["prompt_tokens", "completion_tokens", "total_tokens"]
    },
    "VisionResponse": {
      "type": "object",
      "description": "Standard response format for vision inference requests",
      "properties": {
        "success": {
          "type": "boolean",
          "description": "Whether the request was successful"
        },
        "response_text": {
          "type": "string",
          "description": "The generated text response from the model"
        },
        "model": {
          "type": "string",
          "description": "The model used for inference"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of the response"
        },
        "token_usage": {
          "$ref": "#/definitions/TokenUsage",
          "description": "Token usage statistics"
        },
        "metadata": {
          "type": "object",
          "description": "Additional metadata",
          "additionalProperties": true
        },
        "error": {
          "type": ["string", "null"],
          "description": "Error message if success is False"
        }
      },
      "required": ["success", "response_text", "model", "timestamp"]
    },
    "ErrorResponse": {
      "type": "object",
      "description": "Error response format",
      "properties": {
        "success": {
          "type": "boolean",
          "const": false,
          "description": "Always False for error responses"
        },
        "error": {
          "type": "string",
          "description": "Error message describing what went wrong"
        },
        "error_type": {
          "type": "string",
          "enum": ["validation", "model", "system"],
          "description": "Type of error"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of the error"
        },
        "details": {
          "type": ["object", "null"],
          "description": "Additional error details",
          "additionalProperties": true
        }
      },
      "required": ["success", "error", "error_type", "timestamp"]
    },
    "HealthResponse": {
      "type": "object",
      "description": "Health check response format",
      "properties": {
        "status": {
          "type": "string",
          "enum": ["healthy", "unhealthy", "degraded"],
          "description": "Health status"
        },
        "model_loaded": {
          "type": "boolean",
          "description": "Whether the model is loaded and ready"
        },
        "model_name": {
          "type": "string",
          "description": "Name of the loaded model"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of health check"
        }
      },
      "required": ["status", "model_loaded", "model_name", "timestamp"]
    }
  }
}
